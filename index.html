<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Center C-Net</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: #f8f9fa;
        }

        .media-card {
            transition: 0.3s;
        }

        .media-card:hover {
            transform: scale(1.03);
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            opacity: 0.9;
        }

        .media-wrapper {
            position: relative;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background: #f0f0f0;
        }

        img,
        video {
            max-height: 100%;
            max-width: 100%;
        }
    </style>
</head>

<body>

    <div class="container py-5">
        <h2 class="text-center fw-bold mb-4">ðŸ“¦ Semua Media C-Net</h2>

        <div id="mediaContainer" class="row g-4">
            <!-- Semua file akan tampil otomatis -->
        </div>
    </div>

    <script>
        const folder = "icon-cn/";

        // Semua jenis file
        const imageExt = ["jpg", "jpeg", "png", "webp", "svg", "gif"];
        const videoExt = ["mp4", "mov", "webm"];
        const audioExt = ["mp3", "wav", "ogg"];
        const pdfExt = ["pdf"];

        // Fetch semua file dalam folder
        fetch(folder)
            .then(res => res.text())
            .then(data => {
                let parser = new DOMParser();
                let html = parser.parseFromString(data, "text/html");
                let links = html.querySelectorAll("a");

                links.forEach(a => {
                    let file = a.getAttribute("href");
                    if (file === "../") return;

                    buatCardMedia(folder + file, file);
                });
            });

        // Buat kartu berdasarkan jenis file
        function buatCardMedia(src, filename) {
            const ext = filename.split('.').pop().toLowerCase();
            const container = document.getElementById("mediaContainer");

            let preview = "";

            if (imageExt.includes(ext)) {
                preview = `<img src="${src}" alt="" class="img-fluid">`;
            }
            else if (videoExt.includes(ext)) {
                preview = `<video src="${src}" muted></video>`;
            }
            else if (audioExt.includes(ext)) {
                preview = `<audio controls src="${src}"></audio>`;
            }
            else if (pdfExt.includes(ext)) {
                preview = `<div class="text-center"><i class="bi bi-file-earmark-pdf fs-1 text-danger"></i></div>`;
            }
            else {
                preview = `<div class="text-center">
                                <i class="bi bi-file-earmark fs-1"></i>
                            </div>`;
            }

            let actionBtn = "";

            if (imageExt.includes(ext)) {
                actionBtn = `<img src="${src}" class="img-fluid">`;
            } else if (pdfExt.includes(ext)) {
                actionBtn = `<a href="${src}" target="_blank" class="btn btn-outline-danger btn-sm">Lihat PDF</a>`;
            } else if (videoExt.includes(ext)) {
                actionBtn = `<video controls class="w-100"><source src="${src}"></video>`;
            } else if (audioExt.includes(ext)) {
                actionBtn = `<audio controls class="w-100"><source src="${src}"></audio>`;
            } else {
                actionBtn = `<a href="${src}" download class="btn btn-secondary btn-sm">Download File</a>`;
            }

            let card = document.createElement("div");
            card.className = "col-6 col-md-4 col-lg-3";

            card.innerHTML = `
                <div class="card shadow-sm media-card">
                    <div class="media-wrapper">
                        <button class="btn btn-primary btn-sm copy-btn" onclick="copyLink('${src}')">Copy Link</button>
                        ${preview}
                    </div>
                    <div class="card-body text-center">
                        <small class="d-block mb-2">${filename}</small>
                        ${actionBtn}
                    </div>
                </div>
            `;

            container.appendChild(card);
        }

        // Copy link ke clipboard
        function copyLink(text) {
            navigator.clipboard.writeText(window.location.origin + "/" + text);
            alert("Link berhasil disalin:\n" + text);
        }
    </script>

    <!-- Icon Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

</body>

</html>